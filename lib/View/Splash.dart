import 'package:firebase_auth/firebase_auth.dart';import 'package:firebase_core/firebase_core.dart';import 'package:flutter/foundation.dart';import 'package:flutter/material.dart';import 'package:flutter_native_splash/flutter_native_splash.dart';import 'package:get/get.dart';import 'package:loading_animation_widget/loading_animation_widget.dart';import 'package:notificationsystem_mobile/controler/method.dart';import '../controler/auth/auth.dart';import '../help/Colors.dart';import '../help/text_style.dart';import 'Login_page/login_main_page.dart';import 'home_page.dart';class Splash extends StatefulWidget {  const Splash({Key? key,}) : super(key: key);  @override  State<Splash> createState() => _SplashState();}class _SplashState extends State<Splash> {  RxBool splashflag = false.obs;  @override  void initState() {    super.initState();    splashflag.value= true;    if (kDebugMode) {      print("^^^^^^^^^^^^^^^^^^^^^^^^^_SplashState^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^666");    }    Future<void> autoLogin() async {      String email = await UserPreferences.getEmail() ?? "";      String password = await UserPreferences.getPassword() ?? "";      FirebaseAuth auth = FirebaseAuth.instance;      if (auth.currentUser != null) {        print("Email is : ${email}password is : ${password}");        print("----------user is  logged in------------");        await UserPreferences.getAccount1();        await Methods.refreshData();        Get.offAll(const HomePage(indexOF: 0,), transition: Transition.fadeIn,duration: const Duration(seconds:0));      } else {        // user is not logged in        print("-----------user is not logged in-----------");        Get.offAll(LogIn_Main_Page(), transition: Transition.fadeIn,duration: const Duration(seconds: 3));      }    }    Future.delayed(const Duration(seconds:1), () async {     FlutterNativeSplash.remove();   await autoLogin();     splashflag.value=false;     });  }  @override  Widget build(BuildContext context) {    return Scaffold(      backgroundColor: Colorsapp.White,      body: SafeArea(        child: Padding(          padding: const EdgeInsets.all(8.0),          child: Column(            mainAxisAlignment: MainAxisAlignment.center,            children: [              Image.asset(                "photo/logo.png",                width: MediaQuery.of(context).size.width / 2,                height: MediaQuery.of(context).size.height / 4,              ),              Center(                child: Text(                  "جامعة تكنولوجيا",                  style: Text_Style.getstyle(                      fontsize: MediaQuery.of(context).size.width / 18,                      ColorText: Colorsapp.mainColor,                      fontWeight: FontWeight.w700),                ),              ),              Center(                child: Text(                  "المعلومات والاتصالات",                  style: Text_Style.getstyle(                      fontsize: MediaQuery.of(context).size.width / 18,                      ColorText: Colorsapp.mainColor,                      fontWeight: FontWeight.w700),                ),              ),              Center(                child: Text(                  "كلية الهندسة",                  style: Text_Style.getstyle(                      fontsize: MediaQuery.of(context).size.width / 18,                      ColorText: Colorsapp.mainColor,                      fontWeight: FontWeight.w700),                ),              ),              Center(                child: Text(                  "قسم تكنولوجيا الاعلام والاتصالات",                  style: Text_Style.getstyle(                      fontsize: MediaQuery.of(context).size.width / 18,                      ColorText: Colorsapp.mainColor,                      fontWeight: FontWeight.w500),                ),              ),              Obx(() {                return splashflag.value == true                    ? Padding(                        padding: const EdgeInsets.only(top: 30),                        child: Center(                          child: LoadingAnimationWidget.flickr(                            size: 100,                            leftDotColor: Colorsapp.mainColor,                            rightDotColor: Colorsapp.SecondColor,                            //color: Colorsapp.mainColor,                          ),                        ),                      )                    : Container(                        height: 130,                      );              }),            ],          ),        ),      ),    );  }}